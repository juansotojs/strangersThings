(this.webpackJsonpstrangersthings=this.webpackJsonpstrangersthings||[]).push([[0],{33:function(e,t,s){"use strict";s.r(t);var n=s(8),c=s(1),a=s(17),r=s.n(a),i=s(4),o=s(2),l=s(5),j=s.n(l),d=s(10),h=s(0),u=function(e){var t=Object(c.useState)(""),s=Object(n.a)(t,2),a=s[0],r=s[1],i=Object(c.useState)(""),l=Object(n.a)(i,2),u=l[0],p=l[1],b=Object(c.useState)(""),O=Object(n.a)(b,2),x=O[0],m=O[1],f=Object(c.useState)(""),g=Object(n.a)(f,2),v=g[0],N=g[1],S=e.setPosts,y=e.token,k=Object(o.e)();function w(){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}}).then((function(e){return e.json()})).then((function(e){S(e.data.posts)})).catch(console.error);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"card",children:Object(h.jsx)("div",{className:"newPost",children:Object(h.jsxs)("form",{onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.preventDefault();case 2:fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({post:{title:a,description:u,price:x,willDeliver:!0}})}).then((function(e){return e.json()})).then((function(e){w()})).catch(console.error),k.push("/posts");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(h.jsx)("input",{type:"text",placeholder:"Title",value:a,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("input",{type:"text",placeholder:"Description",value:u,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("input",{type:"text",placeholder:"Price",value:x,onChange:function(e){return m(e.target.value)}}),Object(h.jsx)("input",{type:"text",placeholder:"Location",value:v,onChange:function(e){return N(e.target.value)}}),Object(h.jsx)("button",{className:"messageBttn",children:"Add Post"})]})})})})},p=function(e){var t=e.posts,s=e.setPosts,n=e.token,a=(e.code,e.setCode),r=e.setId,l=Object(o.e)();function p(){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){s(e.data.posts)})).catch(console.error);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){return p()}),[]);var O=function(){var e=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){p()})).catch(console.error);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(i.a,{children:Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsxs)("div",{className:"status",children:[Object(h.jsx)("h1",{children:"Posts"}),Object(h.jsx)("input",{type:"text",placeholder:"Search post"}),n?Object(h.jsx)("div",{className:"link",children:Object(h.jsx)(i.b,{to:"/posts/newpost",className:"aType",children:"Add Post"})}):null]}),Object(h.jsx)(o.a,{exact:!0,path:"/posts",children:Object(h.jsx)("div",{className:"cards",children:t.map((function(e,t){return Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsx)("h2",{children:e.title}),Object(h.jsxs)("div",{className:"info",children:[Object(h.jsx)("p",{className:"descr",children:e.description}),Object(h.jsxs)("div",{className:"subInfo",children:[Object(h.jsx)("h3",{children:"Price: "}),Object(h.jsx)("p",{className:"infoVal",children:e.price})]}),Object(h.jsxs)("div",{className:"subInfo",children:[Object(h.jsx)("h3",{children:"Seller: "})," ",Object(h.jsx)("p",{className:"infoVal",children:e.author.username})]}),Object(h.jsxs)("div",{className:"subInfo",children:[Object(h.jsx)("h3",{children:"Location: "})," ",Object(h.jsx)("p",{className:"infoVal",children:e.location})]})]}),n&&!e.isAuthor?Object(h.jsx)("button",{className:"messageBttn",onClick:function(){l.push("/messages"),a(e._id)},children:"SEND MESSAGE"}):null,n&&e.isAuthor?Object(h.jsx)("button",{className:"messageBttn",onClick:function(){l.push("/list_of_messages"),r(t)},children:"SEE MESSAGES"}):null,n&&e.isAuthor?Object(h.jsx)("button",{className:"messageBttn",onClick:function(){return O(e._id)},children:"DELETE"}):null]})},t)}))})}),Object(h.jsx)(o.a,{exact:!0,path:"/posts/newpost",children:Object(h.jsx)("div",{className:"cards",children:Object(h.jsx)(u,{token:n,setPosts:s})})})]})})})},b=function(e){e.token;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)("div",{className:"status",children:Object(h.jsx)("h1",{className:"section",children:"Home"})}),Object(h.jsx)("div",{className:"cards",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h1",{children:"Welcome to Strangers Things!"}),Object(h.jsx)("p",{children:"Please login or register."})]})})]})})},O=function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)("div",{className:"status",children:Object(h.jsx)("h1",{className:"section",children:"Profile"})}),Object(h.jsx)("div",{className:"cards",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h1",{children:"Login to view profile"}),Object(h.jsx)("p",{children:"Please login or register."})]})})]})})},x=function(e){var t=e.username,s=e.setUsername,n=e.password,c=e.setPassword,a=e.setToken,r=(e.token,Object(o.e)());return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(i.a,{children:Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)("div",{className:"status",children:Object(h.jsx)("h1",{className:"section",children:"Login/Register"})}),Object(h.jsx)("div",{className:"cards",children:Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("div",{className:"toggle",children:[Object(h.jsx)(i.b,{to:"/login/signin",className:"opt",children:"Login"}),Object(h.jsx)(i.b,{to:"/login/register",className:"opt",children:"Register"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)(o.a,{exact:!0,path:"/login/register",children:Object(h.jsx)("div",{className:"card-info",children:Object(h.jsxs)("form",{className:"field",onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.preventDefault();case 2:return e.next=4,void fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:n}})}).then((function(e){return e.json()})).then((function(e){console.log("register"),!0===e.success&&(a(e.data.token),r.push("/home"))}));case 4:s(""),c("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(h.jsxs)("div",{className:"usernameInput",children:[Object(h.jsx)("p",{children:"Username"}),Object(h.jsx)("input",{type:"text",placeholder:"Username",className:"txtBox",value:t,onChange:function(e){return s(e.target.value)}})]}),Object(h.jsxs)("div",{className:"passwordInput",children:[Object(h.jsx)("p",{children:"Password"}),Object(h.jsx)("input",{type:"password",placeholder:"Password",className:"txtBox",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(h.jsx)("p",{className:"youAgree",children:"By submitting this form I agree to the terms and conditions."}),Object(h.jsx)("button",{type:"submit",className:"loginBttn",children:"REGISTER"})]})})}),Object(h.jsx)(o.a,{exact:!0,path:"/login/signin",children:Object(h.jsx)("form",{className:"field",onSubmit:function(){var e=Object(d.a)(j.a.mark((function e(i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.preventDefault();case 2:return e.next=4,void fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:t,password:n}})}).then((function(e){return e.json()})).then((function(e){a(e.data.token),r.push("/home")})).catch(console.error);case 4:s(""),c("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(h.jsxs)("div",{className:"fillOut",children:[Object(h.jsxs)("div",{className:"usernameInput",children:[Object(h.jsx)("p",{children:"Username"}),Object(h.jsx)("input",{type:"text",placeholder:"Username",className:"txtBox",value:t,onChange:function(e){return s(e.target.value)}})]}),Object(h.jsxs)("div",{className:"passwordInput",children:[Object(h.jsx)("p",{children:"Password"}),Object(h.jsx)("input",{type:"password",placeholder:"Password",className:"txtBox",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(h.jsx)("p",{className:"youAgree",children:"By submitting this form I agree to the terms and conditions."}),Object(h.jsx)("button",{type:"submit",className:"loginBttn",children:"LOGIN"})]})})})]})]})})]})})})},m=function(e){var t=e.token,s=e.setComment,n=e.comment,c=e.code,a=Object(o.e)(),r=function(){var e=Object(d.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts/".concat(c,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({message:{content:"".concat(n)}})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).then(s("")).then(a.push("/posts"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"cards",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsx)("input",{type:"text",placeholder:"Message",value:n,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("button",{className:"messageBttn",onClick:function(){return r(c)},children:"SEND"})]})})})})},f=function(e){var t=e.posts[e.id].messages;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"status",children:Object(h.jsx)("h1",{children:"Messages"})}),Object(h.jsx)("div",{className:"cards",children:Object(h.jsx)("div",{className:"card",children:t.map((function(e,t){return Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsx)("h2",{children:e.fromUser.username}),Object(h.jsx)("span",{}),Object(h.jsx)("h3",{children:e.content})]})}))})})]})},g=function(){var e=Object(c.useState)([]),t=Object(n.a)(e,2),s=t[0],a=t[1],r=Object(c.useState)(""),l=Object(n.a)(r,2),j=l[0],d=l[1],u=Object(c.useState)(""),g=Object(n.a)(u,2),v=g[0],N=g[1],S=Object(c.useState)(""),y=Object(n.a)(S,2),k=y[0],w=y[1],P=Object(c.useState)(""),T=Object(n.a)(P,2),B=T[0],C=T[1],E=Object(c.useState)(""),I=Object(n.a)(E,2),A=I[0],J=I[1],M=Object(c.useState)(""),R=Object(n.a)(M,2),D=R[0],L=R[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(i.a,{children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"dashboard",children:[Object(h.jsxs)("div",{className:"user",children:[Object(h.jsx)("h3",{children:"User Name"}),Object(h.jsx)("p",{children:"Pro Member"})]}),Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)("div",{className:"link",children:Object(h.jsx)(i.b,{to:"/home",className:"aType",children:"Home"})}),Object(h.jsx)("div",{className:"link",children:Object(h.jsx)(i.b,{to:"/posts",className:"aType",children:"Posts"})}),Object(h.jsx)("div",{className:"link",children:Object(h.jsx)(i.b,{to:"/profile",className:"aType",children:"Profile"})}),Object(h.jsx)("div",{className:"link",children:j?Object(h.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),d("")},children:"Logout"}):Object(h.jsx)(i.b,{to:"/login",className:"lText",children:"Login"})})]}),Object(h.jsx)("div",{className:"pro",children:Object(h.jsx)("h2",{className:"ad",children:"Sign up to create a post."})})]}),Object(h.jsx)(o.a,{exact:!0,path:"/posts",children:Object(h.jsx)(p,{id:D,setId:L,posts:s,setPosts:a,token:j,code:A,setCode:J})}),Object(h.jsx)(o.a,{exact:!0,path:"/home",children:Object(h.jsx)(b,{token:j})}),Object(h.jsx)(o.a,{exact:!0,path:"/profile",children:Object(h.jsx)(O,{})}),Object(h.jsx)(o.a,{exact:!0,path:"/login",children:Object(h.jsx)(x,{setPassword:w,password:k,setUsername:N,username:v,setToken:d,token:j})}),Object(h.jsx)(o.a,{exact:!0,path:"/messages",children:Object(h.jsx)(m,{token:j,setComment:C,comment:B,code:A,setCode:J})}),Object(h.jsx)(o.a,{exact:!0,path:"/list_of_messages",children:Object(h.jsx)(f,{id:D,setId:L,posts:s,setPosts:a})})]})})})};r.a.render(Object(h.jsx)(g,{}),document.getElementById("app"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ac76778e.chunk.js.map